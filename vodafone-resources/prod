_stTracker.insertTags({"tags":[{"markerCondition":"[]","selector":"head","id":797,"version":27,"content":"(function() {\n    'use strict';\n\t\n    // Check for presence and value of specific Adobe s-object value, without throwing errors.\n    // Example: checkSobject('prop43');\n    window.checkSobject = function (element) {\n        try {\n            if(typeof window.s !== 'undefined' && typeof window.s[element] !== 'undefined' && window.s[element] !== '' && window.s[element].indexOf('unknown') === -1) {\n                return window.s[element];\n            } else {\n                return false;\n            }\n        } catch(e) {\n\t\t\t_st.debug.log('checkSobject error: ' + e);\n\t\t}\n    };\n\n    // helper function to get a nested R42-property or object, without throwing errors.\n    // Returns an empty string if one or more levels is/are undefined. Example: getR42Property('user.RFS');\n    window.r42getProperty = function(propString) {\n        try {\n            var ret = eval('window._st.data._tagProperties.'+propString);\n            if(typeof ret === 'undefined') {\n                return '';\n            }\n            return ret;\n        } catch(e) {\n            return '';\n        }\n    };\n\n    // helper function to set a nested R42-property or object, without throwing errors.\n    // Example: r42setProperty('user','RFS','ziggo');\n    window.r42setProperty = function (property,child,value) {\n\t\ttry {\n            var element = {};\n            if (_st.data.getProperty(property) !== '') {\n                element = _st.data.getProperty(property);\n            }\n            element[child] = value;\n            // _st.data.setProperty(property, element); // DISABLED BECAUSE THE r42data OBJECT TAKES OVER\n\t\t\t\n\t\t\t// sent property as object to r42data\n\t\t\tvar data = {};\n\t\t\tdata[property] = {};\n\t\t\tdata[property][child] = value;\n\t\t\tr42data.set(data);\n\n\t\t} catch(e) {}\n    };\n\t\n\twindow.r42data = {\n\t\tlayer: {},\n\t\tinit: function(){\n\t\t\t// get browser storage or cookie and set in r42data\n\t\t\tvar data = {}, storeddata = {}, props = ['session', 'user', 'segments', 'userproducts', 'userfeatures', 'target'];\n\t\t\tvar storage = r42data.storage();\n\t\t\t\n\t\t\tif(storage && storage.getItem('_zUDL') !== null){ \n\t\t\t\tstoreddata = _st.util.decodeJson(sessionStorage.getItem('_zUDL'));\n\t\t\t} else if (typeof _st.util.getCookie('_zUDL') !== 'undefined') {\n\t\t\t\tstoreddata = _st.util.decodeJson(_st.util.getCookie('_zUDL'));\n\t\t\t}\n\n\t\t\tfor (var i in props) {\n\t\t\t\tif(typeof(storeddata[props[i]]) !== 'undefined') {\n\t\t\t\t\tdata[props[i]] = storeddata[props[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t\tr42data.set(data);\n\t\t\t_st.debug.log('>> r42data.init() finished');\n\n\t\t},\n\t\tupdate: function(){\n\t\t\t// use to update r42data with current R42 tagProperties datalayer\n\t\t\tvar props = _st.data.getPropertyNames();\n\t\t\tvar tp = _st.data._tagProperties;\n\t\t\tfor (var i in props) {\n\t\t\t\tvar data = {}; data[props[i]] = tp[props[i]];\n\t\t\t\tr42data.set(data);\n\t\t\t}\n\t\t},\n\t\tempty: function(obj){ // helper function to test if an object is empty\n\t\t\tfor(var p in obj) { return false; }\n\t\t\treturn true;\n\t\t},\n\t\tget: function(elGet){ // elementToGet = string with JSON-element > 'page.name' or entire object 'page'\n\t\t\ttry {\n\t\t\t\tvar result = eval('r42data.layer.'+elGet) || eval('window._st.data._tagProperties.'+elGet);\n\t\t\t\tif(typeof result === 'undefined') return undefined;\n\t\t\t\treturn result;\n\t\t\t} catch(e) { \n\t\t\t\treturn undefined; }\n\t\t},\n\t\tset: function(elSet){ // elementToSet = JSON-object with element and value > {page:{name:'paginanaam'},user:{name:'naam'}}\n\t\t\tif(typeof elSet !== 'object') { return; }\n\t\t\tfor (var element in elSet) {\n\t\t\t\tvar newprops = elSet[element],\n\t\t\t\t\tprops = r42data.get(element) || {};\n\t\t\t\tif(typeof newprops === 'string') {\n\t\t\t\t\tprops = newprops; \n\t\t\t\t} else {\n\t\t\t\t\tfor (var property in newprops) {\n\t\t\t\t\t\tprops[property] = newprops[property];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tr42data.layer[element] = props; \t\t// set in r42data object\n\t\t\t\t_st.data.setProperty(element, props); \t// set in tagProperties datalayer\n\t\t\t\t_st.debug.log('>> r42data.layer.'+element+' updated > '+JSON.stringify(newprops));\n\t\t\t}\n\t\t\t\n\t\t\tvar store = {}, stuff = ['session', 'user', 'segments', 'userproducts', 'userfeatures', 'target'];\n\t\t\tfor (var s in stuff) {\n\t\t\t\tstore[stuff[s]] = r42data.layer[stuff[s]];\n\t\t\t\t} // prepare to only store specific objects in cookie\n\t\t\t\n\t\t\tvar storage = r42data.storage();\n\t\t\tif(storage){ // update in browser storage\n\t\t\t\tstorage.setItem('_zUDL', _st.util.encodeJson(r42data.layer));\n\t\t\t} else {\n\t\t\t\t_st.util.setCookie('_zUDL', _st.util.encodeJson(store));\n\t\t\t}\n\t\t},\n\t\tstorage: function() { // test function, returns 'undefined' or the sessionStorage as object 'storage'\n\t\t\tvar uid = new Date();\n\t\t\tvar storage;\n\t\t\tvar result;\n\t\t\ttry {\n\t\t\t\t(storage = window.sessionStorage).setItem(uid, uid);\n\t\t\t\tresult = storage.getItem(uid) == uid;\n\t\t\t\tstorage.removeItem(uid);\n\t\t\t\treturn result && storage;\n\t\t\t} catch (exception) {}\n\t\t}\n\t};\n\tr42data.init();\n\n\n\t// helper function to add generic event listener on DOM-elements\n\tvar addEvent = function (el, eventName, handler) { // generic listener\n\t\tif (el.addEventListener) {\n\t\t\tel.addEventListener(eventName, handler);\n\t\t} else {\n\t\t\tel.attachEvent('on' + eventName, function () {\n\t\t\t\thandler.call(el);\n\t\t\t});\n\t\t}\n\t};\n\n\t// helper function for targeted content to track clicks on CTA's or buttons in an injected banner\n\twindow.r42trackPromoListener = function (classname, linkregex) {\n        if (document.getElementsByClassName) {\n            try {\n                var el = document.getElementsByClassName(classname);\n                for (var i=0; i < el.length;i++) {\n                    var href = (typeof(el[i].getAttribute('href')) === 'string' ) ? el[i].getAttribute('href') : '';\n                    var rex = new RegExp(linkregex);\n                    if(rex.test(href) === true) {\n                        addEvent(el[i],'click', function(e) {\n                            var url = this.getAttribute('href');\n                            trackPromo('click',url); // trackPromo() function is defined in the promotion\n                            e.preventDefault();\n                        });\n                    }\n                }\n            } catch(ignore) {}\n        }\n    };\n\n\t\n\t// helper function using jQuery to track clicks.\n\t// clickData should be {'type': accordion|button|link|tab|submit, 'name': 'descriptive name', 'form': 'form name', 'text': 'override_text'}\n\twindow.r42ClickEvent = function (selector,clickData) {\n\t\t$(selector).click(clickData, function(e){\n\t\t\t\n\t\t\t// DEFAULT CLICKEVENT CODE\n\t\t\tvar clickElement = $(this);\n\t\t\tvar data = clickData || {};\n\n\t\t\tvar text = (clickElement.text() !== '' ) ? clickElement.text().trim() : undefined;\n\t\t\tif(data.text) text = data.text; // override text when set in the listener\n\t\t\tvar href = (typeof (this.getAttribute('href')) === 'string' ) ? this.getAttribute('href') : undefined;\n\n\t\t\tdata.link = (href) ? href : undefined;\n\t\t\tdata.text = (text) ? text : undefined;\n\t\t\tdata.page = document.location.href;\n\t\t\t\n\t\t\tdata.eventCategory = 'interaction/click';\n\t\t\tdata.eventAction = data.type + ': ' + data.name ;\n\t\t\tdata.eventLabel = (text) ? 'text: ' + text : 'No text found';\n\t\t\t\n\n\t\t\t// EXEPTIONS ON DEFAULT CODE\n\t\t\tif(data.type === 'button' || data.type === 'link' ) {\n\t\t\t\tdata.eventAction = (text) ? data.type + ': ' + text : data.type + ': ' + data.name ;\n\t\t\t\t// data.eventAction = (text) ? data.type + ': ' + text.substring(0,40) : data.type + ': ' + data.name ;\n\t\t\t\tdata.eventLabel = (href) ? 'link: ' + href : 'No link found';\n\t\t\t}\n\t\t\t\n\t\t\t// attempts to stop the event from publishing (return the function), on closure of the accordion\n\t\t\tif(data.type === 'accordion' ) {\n\t\t\t\tif(data.name === 'shoppingcart: product bullets foldout' && this.className.indexOf('open') !== -1 ) return;\n\t\t\t\tif(data.name === 'fold out' && this.parentNode.className.indexOf('current') > -1 ) return;\n\t\t\t\tif(data.name === 'product addon details') {\n\t\t\t\t\ttext = (clickElement.parent().children(':first').text() !== '' ) ? clickElement.parent().children(':first').text().trim() : undefined;\n\t\t\t\t\tdata.eventLabel = 'text: ' + text;\n\t\t\t\t\tif(this.className.indexOf('active') == -1 ) return;\n\t\t\t\t}\n\t\t\t\tif(data.name === 'shoppingcart: call/chat' && document.getElementById('freecallheader').className.indexOf('active') === -1 ) return;\n\t\t\t}\n\t\t\t\n\t\t\tif(data.type === 'submit' && data.form === 'storingschecker'){\n\t\t\t\tvar zip = $('[name=postcode]').val();\n\t\t\t\tvar zip2 = $('[name=postalcode]').val();\n\t\t\t\tdata.zip = zip ? zip : zip2 ? zip2 : undefined ;\n\t\t\t\tdata.eventLabel = data.zip ? 'postcodegebied: ' + data.zip : 'No zipcode found';\n\t\t\t}\n\t\t\tif(data.type === 'submit' && data.form === 'foutcodechecker'){\n\t\t\t\tvar fc = $('#nl_foutcode_type').val();\n\t\t\t\tdata.foutcode = (fc) ? fc : undefined ;\n\t\t\t\tdata.eventLabel = (fc) ? 'foutcode: ' + fc : 'No foutcode found';\n\t\t\t}\n\t\t\tif(data.type === 'submit' && data.form === 'CallMeLater'){\n\t\t\t\tvar tc = $('#cmlnumber').val();\n\t\t\t\tdata.eventLabel = (tc) ? tc.slice(0,-3) + '***' : 'No tel.nr. found';\n\t\t\t}\n\t\t\tif(data.type === 'submit' && data.form === 'CallMeNow'){\n\t\t\t\tvar tc2 = $('.callMeInput').val();\n\t\t\t\tdata.eventLabel = (tc2) ? tc2.slice(0,-3) + '***' : 'No tel.nr. found';\n\t\t\t}\n\n\t\t\t// publish the event (if not returned by any exeptions)\n\t\t\t_st('publishEvent', 'interaction/click', 'click', data);\n\t\t});\n\t};\t\n\n\n\t//helper function for GA events based on Relay event\n\twindow.r42gaEvent = function(data){\n\t\tif(data.customs) {\n\t\t\tga('set', data.customs);\n\t\t}\n\t\tga('send','event',\n\t\t   data.eventCategory,\n\t\t   data.eventAction,\n\t\t   data.eventLabel ? data.eventLabel : 'not set',\n\t\t   data.eventValue ? data.eventValue : undefined,\n\t\t   { 'nonInteraction': data.eventNonInteraction === true ? 1 : 0 }\n\t\t);\n\t\t\n\t\t_st.debug.log('> Google360 event triggered: category: '+JSON.stringify(data));\n\t};\n\n\t// publish an event indicating the general functions are ready\n\t_st('publishEvent','r42/general_functions','general_functions', '');\n\n})();\n"},{"markerCondition":"[]","selector":"head","id":879,"version":33,"content":"if(!window.targeting){window.targeting={};}\nwindow.targeting.cugFunctions={};\n\nwindow.migratiepromo2 = function migratiepromo2(){\n\tvar path = document.location.pathname;\n\tif(path == '/alles-in-1/' || path == '/alles-in-1'){\n\t\t//hide all ATL content in top part of table\n\t\t$('.ziggo_table-header-specialoffer-wrapper').hide();\n\t\t$('.ziggo_table-header-specialoffer-separator').hide();\n\t\t$('.ziggo_header-prefix').hide();\n\t\t$('.ziggo_header-byline').hide();\n\n\t\t//change prices top part of table\n\t\t$('.ziggo_table-column.ziggo_header-col.col1 .ziggo_header-pricetag').html(\"€ 45,<sup>95</sup></p>\");\n\t\t$('.ziggo_table-column.ziggo_header-col.col2 .ziggo_header-pricetag').html(\"€ 59,<sup>95</sup></p>\");\n\t\t$('.ziggo_table-column.ziggo_header-col.col3 .ziggo_header-pricetag').html(\"€ 79,<sup>95</sup></p>\");\n\n\n\t\t//hide all ATL content in bottom part of table\n\t\t$('.ziggo_table-footer-specialoffer-wrapper').hide();\n\t\t$('.ziggo_table-footer-specialoffer-separator').hide();\n\t\t$('.ziggo_footer-prefix').hide();\n\t\t$('.ziggo_footer-byline').hide();\n\n\t\t//change prices bottom part of table\n\t\t$('.ziggo_table-column.ziggo_footer-col.col1 .ziggo_footer-pricetag').html(\"€ 45,<sup>95</sup></p>\");\n\t\t$('.ziggo_table-column.ziggo_footer-col.col2 .ziggo_footer-pricetag').html(\"€ 59,<sup>95</sup></p>\");\n\t\t$('.ziggo_table-column.ziggo_footer-col.col3 .ziggo_footer-pricetag').html(\"€ 79,<sup>95</sup></p>\");\n\t}\n};\n\nwindow.atlforced = function atlforced(){\n\tvar path = document.location.pathname;\n\tif(path == '/alles-in-1/' || path == '/alles-in-1'){\n\t\tsetTimeout(function(){\n\t\t\t_st.util.setCookie('customOffer','ATL',30,' ');\n\t\t\tsetCookieZT('_zt','nonCust-v1-topbanner',3,'ziggo.nl','topbanner','forced_url');\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph1').text('Live Formule 1 op Ziggo Sport');\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph1').css({'color':'white'});\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph1').show();\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph13').text('Kijk gratis de beste voetbalduels en live Formule 1 met Ziggo Sport. Stap nu over op Ziggo Alles-in-1 en betaal de eerste 3 maanden € 34,95 p.m.');\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph13').css({'color':'white'});\n\t\t\t$('.squeezeitem.parbase.section .title.section.header .ph13').show();\n\t\t\t$('.container.lgi-templatesection.section .section-desktop.lgiAdaptiveImage.isRetinaImage').css({'background-image':'url(/content/dam/www.ziggo.nl/img/_campaign/September-deals/3840x820_fbtop_frac_bg_1.jpg)'});\n\t\t\t$('.squeezeitem.parbase.section .parsys_column.lgi_col_50_50.ziggo-squeeze-orange.ziggo-squeeze-rightTop .lgi_col_50_50-c1 img').attr('src','/content/dam/www.ziggo.nl/img/_campaign/Formule1/954x660-fbva-f1.png');\n\t\t\t$('.squeezeitem.parbase.section .parsys_column.lgi_col_50_50.ziggo-squeeze-orange.ziggo-squeeze-rightTop .lgi_col_50_50-c1 img').css({\n\t\t\t\t'height':'auto',\n\t\t\t\t'width':'100%'\n\t\t\t});\n\t\t\t$('.squeezeitem.parbase.section .parsys_column.lgi_col_50_50.ziggo-squeeze-orange.ziggo-squeeze-rightTop .lgi_col_50_50-c1 img').show();\n\t\t\t$('.ziggo_table-header-specialoffer-wrapper').show();\n\t\t\t$('.ziggo_table-header-specialoffer-separator').show();\n\t\t\t$('.ziggo_header-prefix').html('<span class=\"ziggo_header-prefix\">De eerste 3 maanden</span>');\n\t\t\t$('.ziggo_header-prefix').show();\n\t\t\t$('.ziggo_header-byline').show();\n\n\t\t\t//change prices top part of table\n\t\t\t$('.ziggo_table-column.ziggo_header-col.col1 .ziggo_header-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\t\t\t$('.ziggo_table-column.ziggo_header-col.col2 .ziggo_header-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\t\t\t$('.ziggo_table-column.ziggo_header-col.col3 .ziggo_header-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\n\n\t\t\t//hide all ATL content in bottom part of table\n\t\t\t$('.ziggo_table-footer-specialoffer-wrapper').show();\n\t\t\t$('.ziggo_table-footer-specialoffer-separator').show();\n\t\t\t$('.ziggo_footer-prefix').html('<span class=\"ziggo_header-prefix\">De eerste 3 maanden</span>');\n\t\t\t$('.ziggo_footer-prefix').show();\n\t\t\t$('.ziggo_footer-byline').show();\n\n\t\t\t//change prices bottom part of table\n\t\t\t$('.ziggo_table-column.ziggo_footer-col.col1 .ziggo_footer-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\t\t\t$('.ziggo_table-column.ziggo_footer-col.col2 .ziggo_footer-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\t\t\t$('.ziggo_table-column.ziggo_footer-col.col3 .ziggo_footer-pricetag').html(\"€ 34,<sup>95</sup></p>\");\n\n\t\t},1000);\n\t}\n};\n\nwindow.cug_girls = function cug_girls(){\n\tpath = document.location.pathname;\n\tif(path.match(/alles-in-1\\/(start|complete|max)/)){\n\t\t$('.topvisual_pdp .squeezeitem img').attr('src', 'https://www.ziggo.nl/img/_campaign/MSXL - 12 mnd/954x660-fbva-msxl-3maanden-girls.png');\t\n\t}\n};\n\nwindow.cug_west = function cug_west(){\n\tpath = document.location.pathname;\n\tif(path.match(/alles-in-1\\/(start|complete|max)/)){\n\t\t$('.topvisual_pdp .squeezeitem img').attr('src', 'https://www.ziggo.nl/img/_campaign/MSXL - 12 mnd/954x660-fbva-msxl-3maanden-westworld (2).png');\t\n\t}\n};\n\n\nwindow.wific = function wific(params){\n\t//$('.wifi-callmenow').removeClass('hidden');\n\t$('.storingchecker').hide();\n\tsetTimeout(function(){\n\t\t$(document).mouseleave(function () {\n    \t\t$(\".helpedHiddenSection\").slideDown().removeClass('hidden');\n\t\t});\n\t},3000);\n\tadd_cmn('.callmenow_template');\n\tsetTimeout(function(){\n\t\tif(typeof InitializeFreecall == 'function'){\n\t\t\tcmnEnable();\n\t\t\tF = InitializeFreecall(\n\t\t\t\t// Container\n\t\t\t\t\"freecallcontainer\", \n\t\t\t\t// subscription\n\t\t\t\tparams[0],\n\t\t\t\t// phone\n\t\t\t\t\"\",\n\t\t\t\t// language\n\t\t\t\tparams[1],\n\t\t\t\t// country\n\t\t\t\t\"\",\n\t\t\t\t// check (1= default [start], 2=fill in date/times for CML [start2])\n\t\t\t\t1,\n\t\t\t\t// options\n\t\t\t\t\"\"\n\t\t\t);\n\t\t}else{\n\t\t\tconsole.log('cmn2');\n\t\t\tsetTimeout(function(){\n\t\t\t\tcmnEnable();\n\t\t\t\tF = InitializeFreecall(\n\t\t\t\t\t// Container\n\t\t\t\t\t\"freecallcontainer\", \n\t\t\t\t\t// subscription\n\t\t\t\t\tparams[0],\n\t\t\t\t\t// phone\n\t\t\t\t\t\"\",\n\t\t\t\t\t// language\n\t\t\t\t\tparams[1],\n\t\t\t\t\t// country\n\t\t\t\t\t\"\",\n\t\t\t\t\t// check (1= default [start], 2=fill in date/times for CML [start2])\n\t\t\t\t\t1,\n\t\t\t\t\t// options\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\t\t\t},5000);\n\t\t}\n\t},1500);\n\tconsole.log(params[0] + ',' + params[1]);\n};\n\n//function to change callmelater id's for wifi campaign (2017)\nwindow.churnc = function wific(params){\n\tadd_cmn_churn('.cmn_churn');\n\tsetTimeout(function(){\n\t\tif(typeof InitializeFreecall == 'function'){\n\t\t\tcmnEnable();\n\t\t\tF = InitializeFreecall(\n\t\t\t\t// Container\n\t\t\t\t\"freecallcontainer\", \n\t\t\t\t// subscription\n\t\t\t\tparams[0],\n\t\t\t\t// phone\n\t\t\t\t\"\",\n\t\t\t\t// language\n\t\t\t\tparams[1],\n\t\t\t\t// country\n\t\t\t\t\"\",\n\t\t\t\t// check (1= default [start], 2=fill in date/times for CML [start2])\n\t\t\t\t1,\n\t\t\t\t// options\n\t\t\t\t\"\"\n\t\t\t);\n\t\t}else{\n\t\t\t//console.log('cmn2');\n\t\t\tsetTimeout(function(){\n\t\t\t\tcmnEnable();\n\t\t\t\tF = InitializeFreecall(\n\t\t\t\t\t// Container\n\t\t\t\t\t\"freecallcontainer\", \n\t\t\t\t\t// subscription\n\t\t\t\t\tparams[0],\n\t\t\t\t\t// phone\n\t\t\t\t\t\"\",\n\t\t\t\t\t// language\n\t\t\t\t\tparams[1],\n\t\t\t\t\t// country\n\t\t\t\t\t\"\",\n\t\t\t\t\t// check (1= default [start], 2=fill in date/times for CML [start2])\n\t\t\t\t\t1,\n\t\t\t\t\t// options\n\t\t\t\t\t\"\"\n\t\t\t\t);\n\t\t\t},5000);\n\t\t}\n\t},1500);\n\t//console.log(params[0] + ',' + params[1]);\n};\n_st('publishEvent','targeting/timing','cugfunctions_set');\n        "},{"execValue2":"cugfunctions_set","markerCondition":"[]","selector":"head","id":933,"execValue":"targeting/timing","version":3,"content":"//set debugmode to true or false\nvar debugmode = false;\n\n//function that sends clicks and views of internal promotions to GA\nwindow.promotionTrackerUDL = function promotionTrackerUDL(dataIn){\n\tvar type;\n\tvar domain = window.location.hostname;\n\tvar path = window.location.pathname.indexOf('.') != -1 ? window.location.pathname.split('.')[0] : window.location.pathname;\n\tvar page = domain+path;\n\tvar data = {};\n\tif(debugmode === true){console.info('Targeting: tracking data', dataIn);}\n\t\n\tconsole.log('length=' + dataIn.campaign.ID.split('-').length);\n\tif(dataIn.campaign.ID.split('-').length == 4){\n\t\tdataIn.campaign.ID = dataIn.campaign.ID.split('-')[0]+'-'+dataIn.campaign.ID.split('-')[1]+'-'+dataIn.campaign.ID.split('-')[2];\n\t}\n\tdata.name = undefined;\n\tdata.creative = dataIn.campaign.ID == 'DEFAULT' ? 'Default' : targeting_campaigns_details[dataIn.campaign.ID].name;\n\tdata.position = dataIn.campaign.ID.split('-')[2];\n\tdata.page = (domain == 'www.ziggo.nl') ? 'z' + path : domain + path;\n\tdata.group = undefined;\n\tif(debugmode === true){console.info('Targeting: cookies: data.name: ' + data.name);}\n\t//get group value from cookie\n\t\n\tvar _ztcookie = JSON.parse(_st.util.getCookie('_zt'));\n\tif(dataIn.campaign.ID != 'DEFAULT'){\n\t\tfor(var i=0; i < _ztcookie.length; i++){\n\t\t\tif(_ztcookie[i].split('|')[0] == dataIn.campaign.ID){\n\t\t\t\tdata.name = _ztcookie[i].split('|')[2];\n\t\t\t\tif(debugmode === true){console.info('Targeting: group: ' + data.group);}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tdata.name = 'Default';\n\t}\n\t\n\tif(dataIn.name == 'Viewed Campaign'){type='view';} else\n\tif(dataIn.name == 'Clicked Campaign'){type='click';}\n\tif(type != 'click' && type != 'view'){return;}\n\t\n\tdata.id = data.name + \"|\" + data.creative + \"|\" + data.page + \"|\" + data.position;\n\tif(debugmode === true){console.info('Targeting: tracking data', data);}\t\n\t\n\tga('ec:addPromo', {\n\t\t'id': data.id,\n\t\t'name': data.name,\n\t\t'creative': data.creative,\n\t\t'position': data.page+\"|\"+data.position\n\t});\n\tif(type == 'click'){ga('ec:setAction', 'promo_click');}\n\ttry{ga('send', 'event', 'Internal Promotions', type, data.name, { 'nonInteraction': 1 });}catch(err){}\n};\n\n//function to set cookie that arranges persist targeting campaigns\nwindow.setCookieZT = function setCookieZT(cName,cValue,cLifetime,domain,position,group,exclCust,exclInt ){\n\tvar path_raw = document.location.pathname;\n\tvar path = path_raw.substr(path_raw.length -1) != '/' ? path_raw + '/' : path_raw;\n\tif(!targeting_options[path] && path.indexOf('zender') != -1){\n\t\tpath = 'generic';\n\t\tif(debugmode === true){console.log('path set to generic3');}\n\t}\n\tvar now = new Date();\n\tvar expire = new Date();\n\tvar newCookie;\n\texpire.setFullYear(now.getFullYear());\n\texpire.setMonth(now.getMonth());\n\texpire.setDate(now.getDate()+cLifetime);\n\texpire.setHours(0,0,0,0);\n\tvar expires = expire.getTime();\n\tif(debugmode === true){console.info('Targeting: setCookieZT: expires= ' + expires);}\n\tvar cValueNew = group ? cValue + '|' + expires + '|' + group + '|' + exclCust + '|' + exclInt : cValue + '|' + expires + '|unknown|' + exclCust + '|' + exclInt;\n\tif(debugmode === true){console.info('Targeting: new cookie value: ' + cValue);}\n\tvar currentCookie_str = _st.util.getCookie(cName) ? _st.util.getCookie(cName) : undefined;\n\tvar currentCookie = _st.util.getCookie(cName) ? JSON.parse(_st.util.getCookie(cName)) : undefined;\n\tif(currentCookie){\n\t\t//debug message\n\t\tif(debugmode === true){console.info('Targeting: _zt cookie was found and contains: ' + currentCookie);}\n\t\tif(currentCookie.length > 0){\n\t\t\t//for each value in the cookie check if it can be removed\n\t\t\tfor(var i=0; i<currentCookie.length; i++){\n\t\t\t\tvar offer = currentCookie[i].split(\"|\")[0];\n\t\t\t\tvar exp =  currentCookie[i].split(\"|\")[1];\n\t\t\t\tvar group_check= currentCookie[i].split(\"|\")[2];\n\t\t\t\t//if offer exists for current position and isn't equal to the new value overwrite cookie\n\t\t\t\t\n\t\t\t\tvar needstostay = false;\n\t\t\t\tvar campaign_array = [];\n\t\t\t\tfor(var path_check in targeting_options){\n\t\t\t\t\tfor(var position_check in targeting_options[path_check]){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar campaigns = targeting_options[path_check][position_check].activeCampaigns;\n\t\t\t\t\t\tif(campaigns.indexOf(offer) > -1 && campaigns.indexOf(cValue) == -1 && (path_check+position_check != path+position)){\n\t\t\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: setCookieZT function: offer=\" + campaigns.indexOf(offer)+ \" cValue = \" + campaigns.indexOf(cValue == -1) + \" path_check_position_check:\" + (path_check+position_check != path+position));}\n\t\t\t\t\t\t\tneedstostay = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(debugmode === true){console.info(\"Targeting: setCookieZT function: \" + offer+ \" needtostay = \" + needstostay);}\t\n\t\t\t\t//three checks:\n\t\t\t\t//offer[i] should be available on the current page (if not, it might be necessary on another page)\n\t\t\t\t//offer[i] should not be equal to the cValue (cause if it's there already it doesn't need to be removed)\n\t\t\t\t//needstostay should be false\n\t\t\t\tif(targeting_options[path][position].activeCampaigns.indexOf(offer) != -1 && cValue != offer && needstostay === false){\n\t\t\t\t\t//remove offer[i] from the cookie\n\t\t\t\t\tcurrentCookie.splice(i,1);\n\t\t\t\t\ti--;\n\t\t\t\t\t//debug message\n\t\t\t\t\tif(debugmode === true){console.info('Targeting: setCookieZT function: deleted value: ' + offer);}\n\t\t\t\t//if the three checks above are false do the following check:\n\t\t\t\t//offer[i] shouldn't be available on the current page\n\t\t\t\t} else if(targeting_options[path][position].activeCampaigns.indexOf(offer) == -1) { \n\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: setCookieZT function: \" + offer+ \" needtostay = \" + needstostay);}\t\n\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: setCookieZT function: offer '\" + offer + \"' was kept for other locations\");}\t\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(currentCookie_str.indexOf(cValue) == -1 && group != 'forced_url'){\n\t\t\t\tcurrentCookie.push(cValueNew);\n\t\t\t} else if (currentCookie_str.indexOf(cValue) == -1 && group == 'forced_url'){\n\t\t\t\tcurrentCookie.unshift(cValueNew);\n\t\t\t}\n\t\t\t//currentCookie.push(cValueNew);\n\t\t\tnewCookie = JSON.stringify(currentCookie);\n\t\t\t//debug message\n\t\t\tif(debugmode === true){console.info('Targeting: setCookieZT function: newcookie value: ' + newCookie);}\n\t\t\t\n\t\t}\n\t} else {\n\t\tcurrentCookie = [cValueNew];\n\t\tnewCookie = JSON.stringify(currentCookie);\n\t\t//debug message\n\t\tif(debugmode === true){console.info('Targeting: setCookieZT function: newcookie value: ' + newCookie);}\n\t\t\n\t}\n\tvar udl = cValue;\n\tif(debugmode === true){console.info('udl ' + udl + ' path: ' + path);}\n\tif(targeting_campaigns_details[cValue].exceptions){\n\t\tif(targeting_campaigns_details[cValue].exceptions[path]){\n\t\t\tvar addition = targeting_campaigns_details[cValue].exceptions[path];\n\t\t\tudl = cValue + '-' + addition;\n\t\t\tif(debugmode === true){console.info('exception found');}\n\t\t}\n\t}\n\tif(debugmode === true){console.info('check udl');}\n\tcheck_udl(cValue,udl);\n\t//document.cookie = cname + \"=\" + cvalue + \";expires=\" + expires + \";domain=\" + domain +\";path=/\";\n\t_st.util.setCookie(cName, newCookie,30,domain);\n\t\n};\n\n//function to call UDL\nwindow.check_udl = function check_udl(ztp,udl){\n\tif(debugmode === true){console.info('check udl reached');}\n\t//send values to UDL\n\tvar loopUDL = setInterval(function(){ checkUDL(); }, 100);\n\tvar i5 = 0;\n\tvar send = false;\n\tfunction checkUDL(){\n\t\ti5++;\n\t\tif(i5<50){\n\t\t\tif(typeof pushToUDL != 'undefined'){\n\t\t\t\t\n\t\t\t\tvar addFunction = targeting_campaigns_details[ztp].addFunction ? targeting_campaigns_details[ztp].addFunction : 'undefined';\n\t\t\t\tvar addArguments = targeting_campaigns_details[ztp].addFunction ? targeting_campaigns_details[ztp].addArguments : '';\n\t\t\t\tif(debugmode === true){console.log('addfunction length ' + addFunction.length + 'addfunction:' + addFunction);}\n\t\t\t\tif(addFunction != 'undefined' ){\n\t\t\t\t\tfor(var i10=0; i10 < addFunction.length;i10++){\n\t\t\t\t\t\tif(debugmode === true){console.log('addfunction '+i10);}\n\t\t\t\t\t\tif(targeting_campaigns_details[ztp].addArguments){addArguments = targeting_campaigns_details[ztp].addFunction[i10] ? targeting_campaigns_details[ztp].addArguments[i10] : '';}\n\t\t\t\t\t\t//if(debugmode === true){console.info(\"Targeting: Additional function arguments : \" + targeting_campaigns_details[ztp].addArguments[i10]);}\n\t\t\t\t\t\tif(addFunction[i10] != 'undefined' && typeof window[addFunction[i10]] == 'function'){\n\t\t\t\t\t\t\twindow[targeting_campaigns_details[ztp].addFunction[i10]](addArguments);\n\t\t\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: Additional function executed: \" + targeting_campaigns_details[ztp].addFunction[i10]);}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: Additional function not executed: \" + targeting_campaigns_details[ztp].addFunction[i10] + 'en:' + typeof window[addFunction]);}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpushToUDL('user', 'customerKeySegment', udl);\t\n\t\t\t\tclearInterval(loopUDL);\n\t\t\t\tif(debugmode === true){console.info('push to udl 3 reached: ' + udl + ' try: ' + i5);}\n\t\t\t\t//try{ga('send', 'event', 'Targeting', 'Initialized',ztp, { 'nonInteraction': 1 });}catch(err){}\n\t\t\t\t\n\t\t\t\tif(debugmode === true){console.info(\"Targeting: CUG function check 1\" +_st.util.getCookie('customOffer') != targeting_campaigns_details[ztp].cugCookie);}\n\t\t\t\t//set CUG cookie and run CUG functions if defined\n\t\t\t\tif(_st.util.getCookie('customOffer') != targeting_campaigns_details[ztp].cugCookie){\n\t\t\t\t\tif(targeting_campaigns_details[ztp].cugFunction != 'undefined' && (document.location.pathname.indexOf('/alles-in-1')!=-1 || document.location.pathname.indexOf('/tv-internet')!=-1)){\n\t\t\t\t\t\tvar iCug = 0;\n\t\t\t\t\t\tvar loopCUG = setInterval(function(){ functionCug(); }, 250);\n\t\t\t\t\t\tfunction functionCug(){\n\t\t\t\t\t\t\tiCug++;\n\t\t\t\t\t\t\tvar functionname = targeting_campaigns_details[ztp].cugFunction;\n\t\t\t\t\t\t\tif(debugmode === true){console.log('cug functionname: '+ functionname);}\n\t\t\t\t\t\t\tif(iCug<9){\n\t\t\t\t\t\t\t\tif(typeof window[functionname] != 'undefined'){\n\t\t\t\t\t\t\t\t\tclearInterval(loopCUG);\n\t\t\t\t\t\t\t\t\twindow[functionname]();\n\t\t\t\t\t\t\t\t\tif(debugmode === true){console.log('cug function '+ functionname + ' executed');}\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttry{ga('send', 'event', 'Targeting', 'CUG:function not found after 2sec',{ 'nonInteraction': 1 });}catch(err){}\n\t\t\t\t\t\t\t\tif(debugmode === true){console.log('cug function '+ functionname + ' not found');}\n\t\t\t\t\t\t\t\tclearInterval(loopCUG);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{if(debugmode === true){console.log('cug not done');}}\n\t\t\t\tif(targeting_campaigns_details[ztp].cugCookie != 'undefined'){\n\t\t\t\t\t_st.util.setCookie('customOffer',targeting_campaigns_details[ztp].cugCookie,30,' ');\n\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: CUG cookie set to '\" + targeting_campaigns_details[ztp].cugCookie + \"'\" );}\n\t\t\t\t}\t\n\t\t\t} else {\n\t\t\t\t//console.log('not found');\n\t\t\t}\n\t\t} else {\n\t\t\ttry{ga('send', 'event', 'Targeting', 'Error: pushToUDL n/a after 2.5 sec', { 'nonInteraction': 1 });}catch(err){}\n\t\t\tclearInterval(loopUDL);\n\t\t}\n\t}\n\t\n\tif(debugmode === true){console.info('Targeting: campaign '+udl+' was trickered.');}\t\n};\n\n//function to execute onsite targeting\nwindow.exe_targeting = function exe_targeting(ztp,position,group,ctime,exclCust,exclInt){\n\tvar path_raw = document.location.pathname;\n\tvar path = path_raw.substr(path_raw.length -1) != '/' ? path_raw + '/' : path_raw;\n\tif(!targeting_options[path] && path.indexOf('zender') != -1){\n\t\tpath = 'generic';\n\t\tif(debugmode === true){console.log('path set to generic2');}\n\t}\n\t//execute forced targeting\n\tif(targeting_options[path][position].activeCampaigns.indexOf(ztp) != -1){\n\t\t//set cookie for persistence\n\t\tvar cookielifetime = ctime ? ctime : targeting_campaigns_details[ztp].cookielifetime;\n\t\texclInt = exclInt ? exclInt : targeting_campaigns_details[ztp].exclIntCust;\n\t\texclCust = exclCust ? exclCust : targeting_campaigns_details[ztp].exclCust;\n\t\tsetCookieZT('_zt',ztp,cookielifetime,'ziggo.nl',position,group,exclCust,exclInt);\n\t\tif(debugmode === true){console.info('Targeting: setcookie function triggered with values: position: ' + position + ' group: ' + group);}\n\t} else {\n\t\tif(debugmode === true){console.info(\"Targeting: unavailable campaign ('\" + ztp + \"') requested in 'exe_targeting' function.\");}\n\t\t//send event to GA if an unavailable campaign is requested\n\t\ttry{ga('send', 'event', 'Targeting', 'Error:unavailable campaign directly reqeusted', ztp + '_' + position, { 'nonInteraction': 1 });}catch(err){}\n\t}\n\t\t\n};\n\n//function to check expiration of items in targeting cookie\nfunction checkExpCookies(cname){\n\tif(_st.util.getCookie(cname)){\n\t\tvar cookie = JSON.parse(_st.util.getCookie(cname));\n\t\tvar now = new Date().getTime();\n\t\tfor(var i = 0; i < cookie.length; i++){\n\t\t\toffer = cookie[i].split(\"|\")[0];\n\t\t\texp = cookie[i].split(\"|\")[1];\n\t\t\tif(now > exp){\n\t\t\t\tcookie.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tif(debugmode === true){console.info(\"Targeting: '_zt' cookie value '\" + offer + \"' was removed due to expiration\");}\n\t\t\t}\n\t\t}\n\t\tif(cookie.length > 0){\n\t\t\t_st.util.setCookie(cname,JSON.stringify(cookie),30,'ziggo.nl');\n\t\t} else {\n\t\t\t_st.util.setCookie(cname,'empty',-1,'ziggo.nl');\n\t\t}\n\t}\n}\n\n//function to remove specific parts of the _zt cookie\nwindow.checkCookieType = function checkCookieType(cname, type){\n\tif(_st.util.getCookie(cname)){\n\t\tvar cookie = JSON.parse(_st.util.getCookie(cname));\n\t\tvar now = new Date().getTime();\n\t\tfor(var i = 0; i < cookie.length; i++){\n\t\t\toffer = cookie[i].split(\"|\")[0];\n\t\t\texp = cookie[i].split(\"|\")[1];\n\t\t\tgroup = cookie[i].split(\"|\")[2];\n\t\t\texclCust = cookie[i].split(\"|\")[3];\n\t\t\texclInt = cookie[i].split(\"|\")[4];\n\t\t\tif(type == 'exclInt' && exclInt == 1){\n\t\t\t\tcookie.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tif(debugmode === true){console.info(\"Targeting: '_zt' cookie value '\" + offer + \"' was removed because it needs to be excluded for internet customers\");}\n\t\t\t\ttry{ga('send', 'event', 'Targeting', 'Cookie_reset', 'exclInt|' + offer + '|' + group, { 'nonInteraction': 1 });}catch(err){}\n\t\t\t}\n\t\t\tif(type == 'exclCust' && exclCust ==1){\n\t\t\t\tcookie.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tif(debugmode === true){console.info(\"Targeting: '_zt' cookie value '\" + offer + \"' was removed because it needs to be excluded for all customers\");}\n\t\t\t\ttry{ga('send', 'event', 'Targeting', 'Cookie_reset', 'exclCust|' + offer + '|' + group, { 'nonInteraction': 1 });}catch(err){}\n\t\t\t}\n\t\t}\n\t\tif(cookie.length > 0){\n\t\t\t_st.util.setCookie(cname,JSON.stringify(cookie),30,'ziggo.nl');\n\t\t} else {\n\t\t\t_st.util.setCookie(cname,'empty',-1,'ziggo.nl');\n\t\t}\n\t}\n};\n\n\n//function to determine what type of onsite targeting needs to be executed\nwindow.init_targeting_new = function init_targeting_new(position,r42campaign){\n\t//check if any values in the targeting cookie are expired\n\tcheckExpCookies('_zt');\n\t\n\t//push all campaigns that are active on the site to campaigns_array\n\t//var campaigns_array = getAllCampaigns();\n\tvar path_raw1 = document.location.pathname;\n\tvar path_raw2 = path_raw1.substr(path_raw1.length -1) != '/' ? path_raw1 + '/' : path_raw1;\n\tvar path = path_raw2.toLowerCase();\n\tif(!targeting_options[path] && path.indexOf('zender') != -1){\n\t\tpath = 'generic';\n\t\tif(debugmode === true){console.log('path set to generic1');}\n\t}\n\tvar resParamOffer = _st.util.getUrlParam('offer') ;\n\tvar resParamAB = _st.util.getUrlParam('zabms') ;\n\tvar resParamZT = _st.util.getUrlParam('zt') ;\n\tvar resCookie = _st.util.getCookie('_zt');\n\t//var resParamECMP = _st.util.getUrlParam('ecmp');\n\t//var resParamCMP = _st.util.getUrlParam('CMP');\n\tvar ztp;\n\tvar group;\n\tvar forced;\n\tvar cookielifetime;\n\t\n\t//check forms of forced targeting\n\tif(resParamAB){\n\t\tif(debugmode === true){console.info(\"Targeting: resParamAB=\"+resParamAB);}\n\t\tif(resParamAB == '1' || resParamAB == '3'){\n\t\t\tztp = 'nonCust-v1-topbanner';\n\t\t\tforced='param';\n\t\t\tcookielifetime = 1;\n\t\t}else if(resParamAB == '2'){\n\t\t\tztp = 'nonCust-v2-topbanner';\n\t\t\tforced='param';\n\t\t\tcookielifetime = 1;\n\t\t}\n\t}else if(resParamOffer){\n\t\tif(cuglookup[resParamOffer]){\n\t\t\tztp = cuglookup[resParamOffer];\n\t\t\tforced = 'param';\n\t\t\tif(debugmode === true){console.info(\"Targeting: param offer found and zt set to:\" + ztp);}\n\t\t}\n\t}\n\telse if(resParamZT){\n\t\tif(resParamZT == 'b2c'){resParamZT='b2c-v1-topbanner';}\n\t\telse if(resParamZT == 'b2b'){resParamZT='b2b-v1-topbanner';}\n\t\t\n\t\tif(targeting_options[path]){\n\t\t\tif(targeting_options[path][position]){\n\t\t\t\tif(targeting_options[path][position].activeCampaigns.indexOf(resParamZT) != -1){\n\t\t\t\t\tztp = resParamZT;\n\t\t\t\t\tforced = 'param';\n\t\t\t\t}else{\n\t\t\t\t\t//debug message\n\t\t\t\t\tif(debugmode === true){console.info(\"Targeting: Error: provided uri parameter '\" + resParamZT + \"' not found\");}\n\t\t\t\t\t//send event to GA if an unvalid targeting param is found in the URL\n\t\t\t\t\ttry{ga('send', 'event', 'Targeting', 'Error:urlParam_invalid', position + ':'+resParamZT, { 'nonInteraction': 1 });}catch(err){}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t//send event to GA if a non-targeted position is being targeted\n\t\t\t\ttry{ga('send', 'event', 'Targeting', 'Error:non_targeted_position', path + '_' + position + '_' + resParamZT, { 'nonInteraction': 1 });}catch(err){}\n\t\t\t}\n\t\t} else {\n\t\t\t//send event to GA if non-targeted page contains an targeting parameter in the url \n\t\t\ttry{ga('send', 'event', 'Targeting', 'Error:urlparamZT_invalid','non_targeted_page:'+ path + '_offer:' + resParamZT, { 'nonInteraction': 1 });}catch(err){}\n\t\t}\n\t}else if(resCookie && !ztp){\n\t\tif(debugmode === true){console.info(\"Targeting: no uri parameter 'offer/zt=' provided in url\");}\n\t\t//console.log('ztp='+ztp);\n\t\tzt_array = JSON.parse(resCookie);\n\t\tfor(var i=0; i < zt_array.length; i++){\n\t\t\toffer = zt_array[i].split(\"|\")[0];\n\t\t\texp = zt_array[i].split(\"|\")[1];\n\t\t\tgroup1= zt_array[i].split(\"|\")[2];\n\t\t\t//debug message\n\t\t\tif(debugmode === true){console.info('Targeting: cookievalue: '+resCookie + ' path:' + path + ' position:' + position + ' offer:' + offer);}\n\t\t\tif(targeting_options[path][position].activeCampaigns.indexOf(offer) != -1){\n\t\t\t\tztp = offer;\n\t\t\t\tgroup = group1;\n\t\t\t\t//console.log('ztp = ' +ztp);\n\t\t\t\tforced='cookie';\n\t\t\t\tbreak;\n\t\t\t} \n\t\t}\n\t} \n\tif(!ztp){\n\t\t//run relay campaign\n\t\t_st.inject.script('//a.svtrd.com/s/1085/p/'+r42campaign);\n\t\tif(debugmode === true){console.info('Targeting: no forced targeting found, R42campaign ' + r42campaign + ' is called.');}\n\t}else if(ztp == 'default'){\n\t\t//show default AEM banner\n\t\tztp = 'none';\n\t\tif(debugmode === true){console.info('Targeting: forced to show default banner through url param.');}\n\t}else if(forced== 'param'){\n\t\t//run function that executes targeting\n\t\tif(cookielifetime){\n\t\t\texe_targeting(ztp,position,'forced_url',cookielifetime);\n\t\t\tif(debugmode === true){console.info('Targeting: forced with cookielifetime');}\n\t\t}else{\n\t\t\texe_targeting(ztp,position,'forced_url');\n\t\t}\n\t\tif(debugmode === true){console.info('Targeting: forced to show banner set in url param.');}\n\t}else{\n\t\texe_targeting(ztp,position,group);\n\t\tif(debugmode === true){console.info('Targeting: forced to show banner set in cookie.');}\n\t}\n};\nif(debugmode === true){console.info(\"Targeting: functions set\");}\n_st('publishEvent','targeting/timing','functions_set');","exec":"event"},{"markerCondition":"[]","r42.conditions":{"condition":{"nodes":[{"nodes":[{"selectionName":"1085_285","nodeType":"CONCRETE"}],"nodeType":"AND"}],"nodeType":"AND"},"cacheSeconds":0},"selector":"head","id":798,"version":10,"content":"(function() {\n\t'use strict';\n\n\tvar migration_status = _st.segmenting.data['1085_285']['v_migration_status'], \n\t\tweek_nr = _st.segmenting.data['1085_285']['v_week_nr'],\n\t\tgeo_segment_id = _st.segmenting.data['1085_285']['v_geo_segment_id'],\n\t\tgeo_segment_descr = _st.segmenting.data['1085_285']['v_geo_segment_descr'],\n\t\tsession_provider = _st.segmenting.data['1085_285']['session_provider'],\n\t\tsession_providerCat = _st.segmenting.data['1085_285']['session_providerCat'],\n\t\tsession_isp = _st.segmenting.data['1085_285']['session_isp'],\n\t\tuser_keysegment = _st.segmenting.data['1085_285']['user_keysegment'],\n\t\tbasket_products = _st.segmenting.data['1085_285']['basket_products'],\n\t\tbasket_customOffer = _st.segmenting.data['1085_285']['basket_customOffer'],\n\t\tbasket_baseURL = _st.segmenting.data['1085_285']['basket_baseURL'],\n\t\tbasket_fullURL = _st.segmenting.data['1085_285']['basket_fullURL'],\n\t\tbasket_addons = _st.segmenting.data['1085_285']['basket_addons'],\n\t\tforced_targeting = _st.segmenting.data['1085_285']['forced_targeting'];\n\t\n\tvar user = {};\n\t// user elements\n\tif (migration_status) user.migration_status = migration_status;\n\tif (week_nr) user.week_nr = week_nr;\n\tif (forced_targeting) user.forced_targeting = forced_targeting;\n\n\tr42data.set({user: user});\n\n\tvar dmp = {};\n\t// dmp elements\n\tif (geo_segment_id) dmp.geo_segment_id = geo_segment_id;\n\tif (geo_segment_descr) dmp.geo_segment_descr = geo_segment_descr;\n\tif (session_provider) dmp.session_provider = session_provider;\n\tif (session_providerCat) dmp.session_providerCat = session_providerCat;\n\tif (session_isp) dmp.session_isp = session_isp;\n\tif (user_keysegment) dmp.user_keysegment = user_keysegment;\n\tif (basket_products) dmp.basket_products = basket_products;\n\tif (basket_customOffer) dmp.basket_customOffer = basket_customOffer;\n\tif (basket_baseURL) dmp.basket_baseURL = basket_baseURL;\n\tif (basket_fullURL) dmp.basket_fullURL = basket_fullURL;\n\tif (basket_addons) dmp.basket_addons = basket_addons;\n\t\n\tif(!r42data.empty(dmp)) r42data.set({dmp: dmp});\n\n\t// publish an event indicating the selection facts are set\n\tvar data = {user: user, dmp: dmp};\n\t_st('publishEvent','r42data/selection_facts_all','selection_facts_all', data);\n\n})();\n"},{"markerCondition":"[]","r42.conditions":{"condition":{"nodes":[{"nodes":[{"selectionName":"1085_523","nodeType":"CONCRETE"}],"nodeType":"AND"}],"nodeType":"AND"},"cacheSeconds":0},"selector":"head","id":799,"version":16,"content":"(function() {\n\t'use strict';\n\n\tvar tv = \t\t_st.segmenting.data['1085_523']['p_tv'], \n\t\ttelephone = _st.segmenting.data['1085_523']['p_telephone'], \n\t\tinternet = \t_st.segmenting.data['1085_523']['p_internet'], \n\t\tmobile = \t_st.segmenting.data['1085_523']['p_mobile'], \n\t\taddon = \t_st.segmenting.data['1085_523']['p_addon'],\n\t\tpartner_main_det = \t_st.segmenting.data['1085_523']['p_partner_main_det'],\n\t\tpartner_main_sub = \t_st.segmenting.data['1085_523']['p_partner_main_sub'];\n\n\tvar userproducts = {};\n\tif (tv) userproducts.tv = tv;\n\tif (telephone) userproducts.telephone = telephone;\n\tif (internet) userproducts.internet = internet;\n\tif (mobile) userproducts.mobile = mobile;\n\tif (addon) userproducts.addon = JSON.stringify(addon);\n\tif (partner_main_det) userproducts.partner_main_det = partner_main_det;\n\tif (partner_main_sub) userproducts.partner_main_sub = partner_main_sub;\n\n\tif(!r42data.empty(userproducts)) r42data.set({userproducts: userproducts});\n\n\t// publish an event indicating the selection facts are set\n\tvar data = {userproducts: userproducts};\n\t_st('publishEvent','r42data/selection_userproducts','selection_userproducts', data);\n\n})();\n"},{"markerCondition":"[]","r42.conditions":{"condition":{"nodes":[{"nodes":[{"selectionName":"1085_524","nodeType":"CONCRETE"}],"nodeType":"AND"}],"nodeType":"AND"},"cacheSeconds":0},"selector":"head","id":800,"version":8,"content":"(function() {\n\t'use strict';\n\n\tvar soho_klant =\t\t\t_st.segmenting.data['1085_524']['f_soho_klant'],\n\t\tsoho_prospect =\t\t\t_st.segmenting.data['1085_524']['f_soho_prospect'],\n\t\tsoho_prospect_no3p =\t_st.segmenting.data['1085_524']['f_soho_prospect_no3p'],\n\t\tchurn_decile =\t\t\t_st.segmenting.data['1085_524']['f_churn_decile'],\n\t\tchurn_decile_tot =\t\t_st.segmenting.data['1085_524']['f_churn_decile_tot'],\n\t\tchurn_score =\t\t\t_st.segmenting.data['1085_524']['f_churn_score'],\n\t\tchurn_score_original =\t_st.segmenting.data['1085_524']['f_churn_score_original'],\n\t\tneed_segment_id =\t\t_st.segmenting.data['1085_524']['f_need_segment_id'],\n\t\tneed_segment_descr =\t_st.segmenting.data['1085_524']['f_need_segment_descr'],\n\t\tmyprime_tv =\t\t\t_st.segmenting.data['1085_524']['f_myprime_tv'],\n\t\thorizon =\t\t\t\t_st.segmenting.data['1085_524']['f_horizon'],\n\t\tfootprint =\t\t\t\t_st.segmenting.data['1085_524']['f_footprint'],\n\t\tonline_tv =\t\t\t\t_st.segmenting.data['1085_524']['f_online_tv'],\n\t\treplay_tv =\t\t\t\t_st.segmenting.data['1085_524']['f_replay_tv'];\n\n\tvar userfeatures = {};\n\tif (soho_klant) userfeatures.soho_klant = soho_klant;\n\tif (soho_prospect) userfeatures.soho_prospect = soho_prospect;\n\tif (soho_prospect_no3p) userfeatures.soho_prospect_no3p = soho_prospect_no3p;\n\tif (churn_decile) userfeatures.churn_decile = churn_decile;\n\tif (churn_decile_tot) userfeatures.churn_decile_tot = churn_decile_tot;\n\tif (churn_score) userfeatures.churn_score = churn_score;\n\tif (churn_score_original) userfeatures.churn_score_original = churn_score_original;\n\tif (need_segment_id) userfeatures.need_segment_id = need_segment_id;\n\tif (need_segment_descr) userfeatures.need_segment_descr = need_segment_descr;\n\tif (myprime_tv) userfeatures.myprime_tv = myprime_tv;\n\tif (horizon) userfeatures.horizon = horizon;\n\tif (online_tv) userfeatures.online_tv = online_tv;\n\tif (replay_tv) userfeatures.replay_tv = replay_tv;\n\n\tif(!r42data.empty(userfeatures)) r42data.set({userfeatures: userfeatures});\n\n\tvar user = {};\n\tif (footprint) user.footprint_dmp = footprint;\n\n\tif(!r42data.empty(user)) r42data.set({user: user});\n\n\t// publish an event indicating the selection facts are set\n\tvar data = {userfeatures: userfeatures, user: user};\n\t_st('publishEvent','r42data/selection_userfeatures','selection_userfeatures', data);\n\n})();\n"},{"markerCondition":"[]","r42.conditions":{"condition":{"nodes":[{"nodes":[{"selectionName":"1085_544","nodeType":"CONCRETE"}],"nodeType":"AND"}],"nodeType":"AND"},"cacheSeconds":0},"selector":"head","id":817,"version":20,"content":"(function() {\n\t'use strict';\n\n\tvar abo_rundate =\t\t\t_st.segmenting.data['1085_544']['t_abo_rundate'];\n\tvar ms_hbo_pool =\t\t\t_st.segmenting.data['1085_544']['t_ms_hbo_pool'];\n\tvar ms_hbo_footprint =\t\t_st.segmenting.data['1085_544']['t_ms_hbo_footprint'];\n\tvar fs_pr =\t\t\t\t\t_st.segmenting.data['1085_544']['t_fs_pr'];\n\tvar service_campaign =\t\t_st.segmenting.data['1085_544']['t_service_campaign'];\n\tvar winback =\t\t\t\t_st.segmenting.data['1085_544']['t_winback'];\n\tvar mgm_pool_mkt =\t\t\t_st.segmenting.data['1085_544']['t_mgm_pool_mkt'];\n\tvar mgm_pool_lft =\t\t\t_st.segmenting.data['1085_544']['t_mgm_pool_lft'];\n\tvar abo_footprint =\t\t\t_st.segmenting.data['1085_544']['t_abo_footprint'];\n\tvar abo_target_code =\t\t_st.segmenting.data['1085_544']['t_abo_target_code'];\n\tvar tientje_rundate =\t\t_st.segmenting.data['1085_544']['t_tientje_rundate'];\n\tvar tientje_pool =\t\t\t_st.segmenting.data['1085_544']['t_tientje_pool'];\n\tvar tientje_channel =\t\t_st.segmenting.data['1085_544']['t_tientje_channel'];\n\tvar tientje_footprint =\t\t_st.segmenting.data['1085_544']['t_tientje_footprint'];\n\tvar sport1_pr =\t\t\t\t_st.segmenting.data['1085_544']['t_sport1_pr'];\n\tvar hbo_pr =\t\t\t\t_st.segmenting.data['1085_544']['t_hbo_pr'];\n\tvar mgm_pool_lvn =\t\t\t_st.segmenting.data['1085_544']['t_mgm_pool_lvn'];\n\tvar film1_pr =\t\t\t\t_st.segmenting.data['1085_544']['t_film1_pr'];\n\tvar abo_contact_channel =\t_st.segmenting.data['1085_544']['t_abo_contact_channel'];\n\tvar tgroup = \t\t\t\t_st.util.getCookie('_ztab');\n\n\tvar target = {};\n\tif (abo_rundate) target.abo_rundate = abo_rundate;\n\tif (tientje_rundate) target.tientje_rundate = tientje_rundate;\n\tif (ms_hbo_pool) target.ms_hbo_pool = ms_hbo_pool;\n\tif (ms_hbo_footprint) target.ms_hbo_footprint = ms_hbo_footprint;\n\tif (hbo_pr) target.hbo_pr = hbo_pr;\n\tif (fs_pr) target.fs_pr = fs_pr;\n\tif (service_campaign) target.service_campaign = service_campaign;\n\tif (winback) target.winback = winback;\n\tif (tientje_footprint) target.tientje_footprint = tientje_footprint;\n\tif (mgm_pool_mkt) target.mgm_pool_mkt = mgm_pool_mkt;\n\tif (mgm_pool_lft) target.mgm_pool_lft = mgm_pool_lft;\n\tif (abo_footprint) target.abo_footprint = abo_footprint;\n\tif (abo_target_code) target.abo_target_code = abo_target_code;\n\tif (tientje_pool) target.tientje_pool = tientje_pool;\n\tif (tientje_channel) target.tientje_channel = tientje_channel;\n\tif (sport1_pr) target.sport1_pr = sport1_pr;\n\tif (mgm_pool_lvn) target.mgm_pool_lvn = mgm_pool_lvn;\n\tif (film1_pr) target.film1_pr = film1_pr;\n\tif (abo_contact_channel) target.abo_contact_channel = abo_contact_channel;\n\tif (tgroup) target.tgroup = tgroup;\n\t\n\t/*\n\t//function to check selection without properties and optionally check for a testgroup\n\tfunction getSelectionNP(segment_id,testgroup){\n\t\tvar re = new RegExp(testgroup);\n\t\tif(typeof(_st.segmenting.data[segment_id]) != 'undefined'){\n\t\t\tif(_st.segmenting.data[segment_id] !== false && (tgroup.match(re,'i') || typeof(testgroup) == 'undefined')) {\n\t\t\t\treturn 1;\n\t\t\t} else{\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}else{\n\t\t\treturn 0;\n\t\t\t//send event to GA that an undefined selection was checked\n\t\t}\n\t}\n\t\n\t//testselection\n\tif(getSelectionNP('1085_526','3|4') == 1){target.test = 1;}\n\t*/\n\t\n\t//closingdeal\n\tif(_st.segmenting.data['1085_218'] !== false && typeof(_st.segmenting.data['1085_218']) != 'undefined' && (tgroup == 'group3' || tgroup == 'group4') ){target.closing = 1;}\n\t//voordeelpakket\n\tif(_st.segmenting.data['1085_350'] !== false && typeof(_st.segmenting.data['1085_350']) != 'undefined'){target.vp = 1;}\n\t//msxl interest\n\tif(_st.segmenting.data['1085_546'] !== false && typeof(_st.segmenting.data['1085_546']) != 'undefined'){target.msxl_int = 1;}\n\n\t\n\t\n\t\n\tif(!r42data.empty(target)) r42data.set({target: target});\n\n\t// publish an event indicating the selection facts are set\n\tvar data = {target: target};\n\t_st('publishEvent','r42data/selection_target','selection_target', data);\n\n})();\n"},{"markerCondition":"[]","selector":"head","id":51,"version":15,"content":"_st.data.setProperty('provider', 'ziggob2b');\n_st.data.setProperty('acq', 'exclude');"},{"markerCondition":"[]","selector":"head","id":276,"version":10,"content":"_st.data.setProperty('provider', 'ziggointern');\n_st.data.setProperty('acq', 'exclude');"},{"markerCondition":"[]","selector":"head","id":780,"version":38,"content":"(function(){\n\n    /* local helper functions */\n    var date = new Date();\n\tfunction currenttime(withmilliseconds) {\n\t\tvar h = date.getHours();\n        h = (h<10) ? '0'+h : h;\n        var m = date.getMinutes();\n        m = (m<10) ? '0'+m : m;\n        var s = date.getSeconds();\n        s = (s<10) ? '0'+s : s;\n\t\tif(withmilliseconds) return h+':'+m+':'+s+':'+date.getMilliseconds();\n        return h+':'+m+':'+s;\n\t}\n\tfunction currentdate() {\n        var y = date.getFullYear();\n        var m = date.getMonth();\n        m = (m<10) ? '0'+m : m;\n        var d = date.getDate();\n        d = (d<10) ? '0'+d : d;\n        return y+'/'+m+'/'+d;\n\t}\n\tfunction currentday() {\n        var day = date.getDay();\n        var days = ['Zondag', 'Maandag', 'Dinsdag', 'Woensdag', 'Donderdag', 'Vrijdag', 'Zaterdag'];\n\t\treturn days[day];\n    }\n\twindow.queryvar = function (s,v) {\n\t\tif(s.indexOf(v) > -1) {\n\t\t\tvar rex = new RegExp('[?&]'+ v +'(?:=([^&]*))?','i');\n\t\t\tvar qv = rex.exec(s);\n\t\t\tvar result = (qv!==null) ? decodeURIComponent(qv[1]) : undefined;\n\t\t\treturn result;\n\t\t} else {return undefined;}\n\t};\n\n    /* page variables ------------------------------ */\n\tr42data.update(); // get all values from Relay42 pageProperties\n\tvar page = r42data.layer.page || {};\n\n\tpage.environment= _st.settings.environment;\n\tpage.iframe = window.document.location.href;\n\tpage.fullurl = (window.location != window.parent.location) ? document.referrer : document.location.href;\n\tvar urlobj = document.createElement('a');\n\turlobj.href = page.fullurl;\n\tpage.host = urlobj.hostname;\n\tpage.path = urlobj.pathname;\n\tif(urlobj.search) page.search = urlobj.search;\n\tif(urlobj.hash) page.hash = urlobj.hash;\n\n    if(_st.settings.structurePrefix.length > 0) {\n        var PR42pre = _st.settings.structurePrefix.toString();\n        PR42pre = PR42pre.replace(/[|,]/g, '|');\n        page.r42prefix = PR42pre;\n    }\n\n    if(_st.settings.pageStructure.length > 0) {\n        var PR42str = _st.settings.pageStructure.toString();\n        PR42str = PR42str.replace(/[|,]/g, '|');\n        page.r42structure = PR42str;\n    }\n\n    var PN = (_st.settings.pageStructure.length > 0) ? '/'+ _st.settings.pageStructure : page.path;\n\tPN = PN.replace(/[|/,]{1,}/g, '/'); // convert r42 pagestructure to path\n\tPN = PN.substr(PN.length-1) != '/' ? PN + '/' : PN; // always end with an '/'\n\tpage.name = PN;\n\t\n\tpage.salesOrService = (PN.indexOf('/support') !== -1) ? 'service' : 'sales';\n\n\tif(page.source && page.source !== '') { // get page.souce from iframe datalayer\n\t\tpage.referrer = page.source;\n\t} else if(_st.util.getUrlParam('source')!=='') { // get the queryvar from the iframe url (if not set in datalayer)\n\t\tpage.referrer = decodeURIComponent(_st.util.getUrlParam('source'));\n    }\n\t\n\tvar qs = queryvar(page.fullurl, 'q');\n\tif(qs) {\n\t\tpage.searchText = qs;\n\t\tpage.searchMode = 'search_results';\n\t\tpage.type = 'partner_search';\n    }\n\n\tpage.date = currentdate();\n\tpage.time = currenttime();\n\tpage.day = currentday();\n\n\tif(!r42data.empty(page)) r42data.set({page: page});\n\n    /* user variables --------------------------------- */\n\tvar user = {};\n\t\n\tif(_st.util.getUrlParam('aa_vid') !== '') user.aa_vid = _st.util.getUrlParam('aa_vid');\n\tif(r42data.get('user.id')) user.id = r42data.get('user.id');\n\n\tuser.r42id = _stTracker.getUserIdentifier();\n\tuser.GAid = _st.util.getCookie('_ga');\n\t\n\tif(_st.util.getUrlParam('cmid') !== '') user.mail_id = _st.util.getUrlParam('cmid');\n\tif(_st.util.getUrlParam('phid') !== '') user.phid = _st.util.getUrlParam('phid');\n\tif(_st.util.getUrlParam('vfid') !== '') user.vfid = _st.util.getUrlParam('vfid');\n\n\tvar cmid = queryvar(page.fullurl, 'cmid');\n\tif(cmid) user.cmid = cmid;\n\tvar phid = queryvar(page.fullurl, 'phid');\n\tif(phid) user.phid = phid;\n\tvar vfid = queryvar(page.fullurl, 'vfid');\n\tif(vfid) user.vfid = vfid;\n\t\n\tuser.type = ((page.name).indexOf('/zakelijk') !== -1) ? 'business' :'consumer';\n\n\tif(!r42data.empty(user)) r42data.set({user: user});\n\n    /* marketing variables -------------------------------- */\n\tvar marketing = {};\n\t\n\tvar cmp = queryvar(page.fullurl, 'cmp');\n\tif(cmp) marketing.campaign = cmp;\n\tvar cmpid = queryvar(page.fullurl, 'cmpid');\n\tif(cmpid) marketing.campaign = cmpid;\n\n\tif(!r42data.empty(marketing)) r42data.set({marketing: marketing});\n\n\t/* promotion variables -------------------------------- */\n\tvar promotion = {};\n\n\tvar icmp = queryvar(page.fullurl, 'icmp');\n\tif(icmp) promotion.id = icmp;\n\tvar intcmp = queryvar(page.fullurl, 'intcmp');\n\tif(intcmp) promotion.id = intcmp;\n\n\tif(!r42data.empty(promotion)) r42data.set({promotion: promotion});\n\n\t// publish an event indicating the general properties are set in the r42data.layer\n\tvar data = r42data.layer;\n\t_st('publishEvent','r42data/general_properties','general_properties', data);\n\n})();\n"},{"markerCondition":"[]","selector":"head","id":705,"version":53,"content":"(function(){\n\t\"use strict\";\n\tvar d = new Date(),\n\t\tweekday = d.getDay(),\n\t\ttimeofday = d.getHours(),\n\t\tdata = { 'user': {}, 'session': {} },\n\t\tfallback;\n\t\n\tvar ISPs = {\n\t\t'example': \t\t['0-footprint_isp','1-connection','2-market','3-category','4-code','5-counter','6-isp','7-provider'],\n\t\t'fallback':\t\t['notmatched','unknown','unknown','unknown','NBH_4',25,'notmatched','unknown'],\n\n\t\t'upcintern':\t['upc','network','intern','internal','NBH_1_Intern',undefined,'upcintern','ziggo'],\n\t\t'ziggointern':\t['ziggo','network','intern','internal','NBH_2_Intern',undefined,'ziggointern','ziggo'],\n\t\t'tele2int':\t\t['competition','network','intern','internal','NBH_8_2',undefined,'tele2_intern','tele2'],\n\t\t'xs4allint':\t['competition','network','intern','internal','NBH_8_6',undefined,'xs4all_intern','xs4all'],\n\n\t\t'upcall':\t\t['upc','cable','consumer','ziggo','NBH_1_All',20,'upcall','ziggo'],\n\t\t'upcconsumer':\t['upc','cable','consumer','ziggo','NBH_1_Consumer',20,'upcconsumer','ziggo'],\n\t\t'ziggo':\t\t['ziggo','cable','consumer','ziggo','NBH_2_1',20,'ziggo','ziggo'],\n\t\t'ziggob2b':\t\t['ziggo','cable','business','ziggo','NBH_2_2',21,'ziggob2b','ziggo'],\n\t\t'ziggomob':\t\t['ziggo','mobile','consumer','ziggo','NBH_2_3',undefined,'ziggo_mobile','ziggo'],\n\n\t\t'kpn':\t\t\t['competition','copper','consumer','kpn','NBH_3_1',22,'kpn','kpn'],\n\t\t'tele2':\t\t['competition','copper','consumer','copperline','NBH_3_2',22,'tele2','tele2'],\n\t\t'tmobile':\t\t['competition','copper','consumer','copperline','NBH_3_13',22,'tmobile','tmobile'],\n\t\t'online':\t\t['competition','copper','consumer','copperline','NBH_3_3',22,'online','online'],\n\t\t'telfort':\t\t['competition','copper','consumer','copperline','NBH_3_5',22,'telfort','telfort'],\n\t\t'xs4all':\t\t['competition','copper','consumer','copperline','NBH_3_6',22,'xs4all','xs4all'],\n\t\t'concepts':\t\t['competition','copper','consumer','copperline','NBH_3_7',22,'concepts','concepts'],\n\t\t'solcon':\t\t['competition','copper','consumer','copperline','NBH_3_8',22,'solcon','solcon'],\n\t\t'cambrium':\t\t['competition','copper','consumer','copperline','NBH_3_9',22,'cambrium','cambrium'],\n\t\t'plinq':\t\t['competition','copper','consumer','copperline','NBH_3_10',22,'plinq','plinq'],\n\t\t'stipte':\t\t['competition','copper','consumer','copperline','NBH_3_11',22,'stipte','stipte'],\n\t\t'edpnet':\t\t['competition','copper','consumer','copperline','NBH_3_12',22,'edpnet','edpnet'],\n\n\t\t'kpnf':\t\t\t['competition','fiber','consumer','kpn','NBH_5_1',22,'kpn_ftth','kpn'],\n\t\t'tele2f':\t\t['competition','fiber','consumer','fiber','NBH_5_2',22,'tele2_ftth','tele2'],\n\t\t'vodafonef':\t['vodafone','fiber','consumer','fiber','NBH_5_4',24,'vodafone_ftth','vodafone'],\n\t\t'telfortf':\t\t['competition','fiber','consumer','fiber','NBH_5_5',22,'telfort_ftth','telfort'],\n\t\t'conceptsf':\t['competition','fiber','consumer','fiber','NBH_5_7',22,'concepts_ftth','concepts'],\n\t\t'edutelf':\t\t['competition','fiber','consumer','fiber','NBH_5_13',22,'edutel_ftth','edutel'],\n\t\t'trixitf':\t\t['competition','fiber','consumer','fiber','NBH_5_14',22,'trixit_ftth','trixit'],\n\t\t'e-questf':\t\t['competition','fiber','consumer','fiber','NBH_5_15',22,'e-quest_ftth','e-quest'],\n\t\t'trinedf':\t\t['competition','fiber','consumer','fiber','NBH_5_16',22,'trined_ftth','trined'],\n\t\t'breednlf':\t\t['competition','fiber','consumer','fiber','NBH_5_17',22,'breednl_ftth','breednl'],\n\t\t\n\t\t'kpnmob':\t\t['competition','mobile','consumer','kpn','NBH_6_1',undefined,'kpn_mobile','kpn'],\n\t\t'tele2mob':\t\t['competition','mobile','consumer','mobile','NBH_6_2',undefined,'tele2_mobile','tele2'],\n\t\t'vodafonemob':\t['vodafone','mobile','consumer','mobile','NBH_6_3',24,'vodafone_mobile','vodafone'],\n\t\t'vodafonemobb2b':['vodafone','mobile','business','b2b','NBH_6_18',24,'vodafone_mobile_b2b','vodafone'],\n\t\t'tmobilemob':\t['competition','mobile','consumer','mobile','NBH_6_19',undefined,'tmobile_mobile','tmobile'],\n\t\t\n\t\t'kpnb2b':\t\t['competition','fiber','business','kpn','NBH_7_1',23,'kpn_b2b','kpn'],\n\t\t'tele2b2b':\t\t['competition','fiber','business','b2b','NBH_7_2',23,'tele2_b2b','tele2'],\n\t\t'onlineb2b':\t['competition','fiber','business','b2b','NBH_7_3',23,'online_b2b','online'],\n\t\t'xs4allb2b':\t['competition','fiber','business','b2b','NBH_7_6',23,'xs4all_b2b','xs4all'],\n\t\t'solconb2b':\t['competition','fiber','business','b2b','NBH_7_8',23,'solcon_b2b','solcon'],\n\t\t'surfnetb2b':\t['competition','fiber','business','b2b','NBH_7_20',23,'surfnet_b2b','surfnet'],\n\t\t\n\t\t'caiwc':\t\t['competition','cable','consumer','cable','NBH_9_21',22,'caiwc','caiw'],\n\t\t'zeelandnetc':\t['competition','cable','consumer','cable','NBH_9_22',22,'zeelandnetc','zeelandnet'],\n\t\t'kabelnoordc':\t['competition','cable','consumer','cable','NBH_9_23',22,'kabelnoordc','kabelnoord'],\n\t\t'lijbrandtc':\t['competition','cable','consumer','cable','NBH_9_24',22,'lijbrandtc','lijbrandt'],\n\t\t'kabeltexc':\t['competition','cable','consumer','cable','NBH_9_25',22,'kabeltexc','kabeltex'],\n\t\t'skvc':\t\t\t['competition','cable','consumer','cable','NBH_9_26',22,'skvc','skv'],\n\n\t\t'kpnh':\t\t\t['competition','hotspot','consumer','kpn','NBH_10_1',22,'kpnh','kpn']\n\t};\n\n\t// fallback: set to 'notmatch' or unknown (BH4) when no provider is set from the configured ISP-ranges\n\t// _st.data.setProperty('provider',''); // enable to test\n\tif (_st.data.getProperty('provider') === '' || typeof _st.data.getProperty('provider') === 'undefined' || typeof ISPs[_st.data.getProperty('provider')] === 'undefined') {\n\t\t_st.data.setProperty('provider','fallback');\n\t}\n\n\tif (_st.data.getProperty('acq') && _st.data.getProperty('acq') !== '') {\n\t\tdata.user.isp_acquisition = _st.data.getProperty('acq');\n\t}\n\n\tdata.user.footprint_isp = \t\tISPs[_st.data.getProperty('provider')][0];\n\tdata.session.isp = \t\t\t\tISPs[_st.data.getProperty('provider')][6];\n\tdata.session.provider = \t\tISPs[_st.data.getProperty('provider')][7];\n\tdata.session.providerCategory = ISPs[_st.data.getProperty('provider')][3];\n\tdata.session.providerMarket = \tISPs[_st.data.getProperty('provider')][2];\n\tdata.session.connection = \t\tISPs[_st.data.getProperty('provider')][1];\n\tdata.session.counter = \t\t\tISPs[_st.data.getProperty('provider')][5];\n\tdata.session.code = \t\t\tISPs[_st.data.getProperty('provider')][4];\n\t\n\t// set business hours - non-businesshours\n    if ((timeofday <= 5 || timeofday >= 17) || (weekday === 0 || weekday === 6)) {\n\t\tdata.session.businesshours = 'no';\n\t} else { \n\t\tdata.session.businesshours = 'yes';\n\t\t// make business hours out of non-business hours :)\n\t\tdata.session.code = (data.session.code).substring(1);\n\t}\n\n\t// publish an event indicating the ISP check is done and trigger the event handler\n\t_st('publishEvent','engagement/provider','engagement', data);\n\n})();"},{"execValue2":"engagement","markerCondition":"[]","selector":"head","id":811,"execValue":"engagement/provider","version":13,"content":"(function(data) {\n\t'use strict';\n\t\n\tif(typeof data !== 'object') return;\n\n\tvar dosomething = function() {\n\n\t\t// set new timestamp\n\t\tdata.session.timestamp = new Date().getTime();\n\n\t\t// set data in r42data.layer\n\t\tr42data.set(data);\n\n\t\t// prepare engagement data\n\t\tvar engagementData = {\n\t\t\t'user_footprint_isp': data.user.footprint_isp,\n\t\t\t'session_isp': data.session.isp,\n\t\t\t'session_provider': data.session.provider,\n\t\t\t'session_providerCategory': data.session.providerCategory,\n\t\t\t'session_providerMarket': data.session.providerMarket,\n\t\t\t'session_connection': data.session.connection,\n\t\t\t'session_businesshours': data.session.businesshours,\n\t\t\t'code': data.session.code\n\t\t};\n\t\t// send engagement to dmp\n\t\t_st.tracking.sendEngagement('isp_check', engagementData);\n\n\t\t// send R42 counter\n\t\tif(data.session.counter) {\n\t\t\t_st.counter.call(data.session.counter); \n\t\t}\n\t};\n\n\t// decide what to do\n\tif(\ttypeof r42data.get('session.timestamp') !== 'undefined' && // timestamp (and session info) already set\n\t   \tr42data.get('session.isp') === data.session.isp && // no change in ISP\n\t   \tr42data.get('session.timestamp')+600000 > new Date().getTime() && // session timestamp younger 10min\n\t   \tr42data.get('session.isp') === data.session.isp // no change in ISP\n\t  ) {\n\t\tr42data.set(data); // set data in r42data.layer\n\t\t_st.debug.log('session info is younger than 10 minutes so do nothing');\n\t} else { // set new session info\n\t\tdosomething();\n\t\t_st.debug.log('no qualifying value for session.timestamp found, prepare to use \"'+ JSON.stringify(data) +'\".');\n\t}\n\n})(this.data);","exec":"event"},{"markerCondition":"[]","selector":"head","id":815,"version":17,"content":"/* Ziggo GA Premium --------------------------------------------------- */\n(function (i, s, o, g, r, a, m) {\n\ti['GoogleAnalyticsObject'] = r;\n\ti[r] = i[r] || function () {\n\t\t(i[r].q = i[r].q || []).push(arguments);\n\t};\n\ti[r].l = 1 * new Date();\n\ta = s.createElement(o);\n\tm = s.getElementsByTagName(o)[0];\n\ta.async = 1;\n\ta.src = g;\n\tm.parentNode.insertBefore(a, m);\n})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');\n\n// ziggo partner-property UA = 9\nvar property = 'UA-39889859-9';\n\nga('create', property, {\n\t'cookieDomain': 'auto',\n\t'allowLinker': true\n});\n\n// unnecsessary until ecommerce is measured\n// ga('require', 'ec');\n\n// publish an event indicating ga-object is created\nvar data = r42data ? r42data.layer : '';\n_st('publishEvent','r42/ga','ga', data);\n_st.debug.log('> event published: r42/ga with data: ' + JSON.stringify(data));"},{"markerCondition":"[]","selector":"head","id":812,"version":15,"content":"(function() {\n\t\n\t// Get vfid from parent url query var 'vfid'\n\tvar ctnsha2 = queryvar(r42data.layer.page.fullurl, 'vfid');\n\n\tvar dostuff = function() {\n\t\t// Map ctnsha2-value to according buckets\n\t\t_st.tracking.storeMapping('2004', ctnsha2, '1');\n\n\t\t_st.counter.call(90); // IDSync partners email\n\n\t\tvar params = {};\n\t\tvar hostName = r42data.layer.page.host;\n\t\tparams['syncLevel'] = 'ctnsha2';\t\n\t\tparams['cookieId'] = _st.tracking.getUserIdentifier();\n\t\tparams['ctnsha2'] = ctnsha2;\n\t\tparams['cookieDomain'] =  hostName.substring(hostName.lastIndexOf(\".\", hostName.lastIndexOf(\".\") - 1) + 1);\n\n\t\t// send IDsync engagement\n\t\t_st.tracking.sendEngagement('IDsync', params);\n\n\t\t// set r42data.layer\n\t\tr42data.set({user: {ctnsha2: ctnsha2}});\n\t};\n\n\t// decide what to do\n\tif(ctnsha2) { // only do this with an available ctnsha2 value\n\t\tif(\n\t\t\tr42data.get('user.ctnsha2') && // user.ctnsha2 is available\n\t\t\tr42data.get('session.timestamp')+600000 > new Date().getTime() // and the session timestamp younger 10min\n\t\t) {\n\t\t\t_st.debug.log('user.ctnsha2 is younger than 10 minutes so do nothing'); // so don't do stuff. it's done.\n\t\t} else { \n\t\t\tdostuff();\n\t\t\t_st.debug.log('no value younger than 10min found for user.ctnsha2 so dostuff');\n\t\t}\n\t}\n\n})();"},{"markerCondition":"[]","selector":"head","id":818,"version":6,"content":"(function() {\n\t\n\t// Get vfbid from parent url query var 'vfbid'\n\tvar BANsha2 = queryvar(r42data.layer.page.fullurl, 'vfbid');\n\n\tvar dostuff = function() {\n\t\t// Map ctnsha2-value to according buckets\n\t\t_st.tracking.storeMapping('2003', BANsha2, '1');\n\n\t\t_st.counter.call(90); // IDSync partners email\n\n\t\tvar params = {};\n\t\tvar hostName = r42data.layer.page.host;\n\t\tparams['syncLevel'] = 'BANsha2';\t\n\t\tparams['cookieId'] = _st.tracking.getUserIdentifier();\n\t\tparams['BANsha2'] = BANsha2;\n\t\tparams['cookieDomain'] =  hostName.substring(hostName.lastIndexOf(\".\", hostName.lastIndexOf(\".\") - 1) + 1);\n\n\t\t// send IDsync engagement\n\t\t_st.tracking.sendEngagement('IDsync', params);\n\n\t\t// set r42data.layer\n\t\tr42data.set({user: {BANsha2: BANsha2}});\n\t};\n\n\t// decide what to do\n\tif(BANsha2) { // only do this with an available ctnsha2 OR BANsha2 value\n\t\tif(\n\t\t\tr42data.get('user.BANsha2') && // user.ctnsha2 is available\n\t\t\tr42data.get('session.timestamp')+600000 > new Date().getTime() // and the session timestamp younger 10min\n\t\t) {\n\t\t\t_st.debug.log('user.BANsha2 is younger than 10 minutes so do nothing'); // so don't do stuff. it's done.\n\t\t} else { \n\t\t\tdostuff();\n\t\t\t_st.debug.log('no value younger than 10min found for user.BANsha2 so dostuff');\n\t\t}\n\t}\n\n})();"},{"execValue2":"","markerCondition":"[]","selector":"head","id":655,"execValue":"r42/general","version":29,"content":"(function(data){\n\t'use strict';\n\n\t//if params contains 'eventCategory' and 'eventAction' > trigger a GA event\n\tif(data.eventCategory && data.eventAction){\n\t\tif(data.customs) {\n\t\t\tga('set', data.customs);\n\t\t}\n\t\tga('send','event',\n\t\t   data.eventCategory,\n\t\t   data.eventAction,\n\t\t   data.eventLabel ? data.eventLabel : 'not set',\n\t\t   data.eventValue ? data.eventValue : undefined,\n\t\t   { 'nonInteraction': data.eventNonInteraction === true ? 1 : 0 }\n\t\t  );\n\t\t_st.debug.log('GAevent triggered: category: '+data.eventCategory+' | action: '+data.eventAction+' | label: '+data.eventLabel);\n\t}\n\n\t//if params contains 'r42engagementName' > trigger a relay engagement\n\tif(data.r42engagementName){\n\t\t_st.tracking.sendEngagement(data.r42engagementName,data.r42engagementParams ? data.r42engagementParams : \"\" );\n\t\t_st.debug.log('engagement triggered: name:' + data.r42engagementName + ' params:'+ data.r42engagementParams);\n\t}\n\t\n})(this.data);\n","exec":"event"},{"markerCondition":"[]","selector":"head","id":781,"version":12,"content":"(function() {\n\tvar data = {};\n\t\n\tif(typeof document.referrer !== 'undefined') { // first set the referer to the parent\n\t\tdata.page_referrer = document.referrer;\n\t}\n\t\n\tvar page = r42data.get('page');\n\tif (page) {\n\t\tif (page.fullurl) data.fullUrl = page.fullurl;\n\t\tif (page.iframe) data.iframe = page.iframe;\n\t\tif (page.referrer) data.page_referrer = page.referrer;\n\t\tif (page.name) data.page_name = page.name;\n\t\tif (page.type) data.page_type = page.type;\n\t\tif (page.searchText) data.page_searchText = page.searchText;\n\t\tif (page.time) data.page_time = page.time;\n\t\tif (page.date) data.page_date = page.date;\n\t}\n\n\tvar user = r42data.get('user');\n\tif (user) {\n\t\tif (user.keysegment) data.user_keysegment = user.keysegment;\n\t\tif (user.footprint_isp) data.user_footprint_isp =  user.footprint_isp;\n\t\tif (user.GAid) data.user_GAid = user.GAid;\n\t\tif (user.r42id) data.user_r42id = user.r42id;\n\t\tif (user.aa_vid) data.user_aa_vid = user.aa_vid;\n\t}\n\n\tvar session = r42data.get('session');\t\n\tif (session) {\n\t\tif (session.isp) data.session_isp = session.isp;\n\t\tif (session.provider) data.session_provider = session.provider;\n\t\tif (session.providerCategory) data.session_providerCategory = session.providerCategory;\n\t\tif (session.providerMarket) data.session_providerMarket = session.providerMarket;\n\t\tif (session.connection) data.session_connection = session.connection;\n\t}\n\n\tvar marketing = r42data.get('marketing');\n\tif (marketing) {\n\t\tif (marketing.campaign) data.marketing_campaign = marketing.campaign;\n\t\tif (marketing.CMP) data.marketing_CMP = marketing.CMP;\n\t}\n\t\n\tvar promotion = r42data.get('promotion');\n\tif (promotion) {\n\t\tif (promotion.id) data.promotion_id = promotion.id;\n\t}\n\n\t_st.tracking.sendEngagement('pageView',data);\n})();\n        ","exec":"onload"},{"markerCondition":"[]","selector":"head","id":810,"version":18,"content":"// Facebook event measuring script, globally used\n(function(){\n\tvar initRequired = true;\n\n\t(function (f, b, e, v, n, t, s) {\n\t\tif (f.fbq) { \n\t\t\tinitRequired = false; \n\t\t\treturn;\n\t\t}\n\t\tn = f.fbq = function() {\n\t\t\tif(n.callMethod) { \n\t\t\t\tn.callMethod.apply(n, arguments);\n\t\t\t} else {\n\t\t\t\tn.queue.push(arguments);\n\t\t\t}\n\t\t};\n\t\tif (!f._fbq) f._fbq = n;\n\t\tn.push = n;\n\t\tn.loaded = !0;\n\t\tn.version = '2.0';\n\t\tn.queue = [];\n\t\tt = b.createElement(e);\n\t\tt.async = !0;\n\t\tt.src = v;\n\t\ts = b.getElementsByTagName(e)[0];\n\t\ts.parentNode.insertBefore(t, s);\n\t})\n\t(window,document,'script','//connect.facebook.net/en_US/fbevents.js');\n\t\n\tfbq('init', '210169842688783');\t\n\t\n\t\n\tvar props = {\n\t\t'partnerUrl' : r42data.layer.page.fullurl ? r42data.layer.page.fullurl : 'not_set',\n\t\t'partnerISP': r42data.layer.session.isp ? r42data.layer.session.isp : 'not_set',\n\t\t'partnerProviderCategory':r42data.layer.session.providerCategory ? r42data.layer.session.providerCategory : 'not_set' ,\n\t\t'partnerProviderMarket':r42data.layer.session.providerMarket ? r42data.layer.session.providerMarket : 'not_set'\n\t};\n\n\tfbq('track', 'PageView',props);\n\t\n\t\n\t\n\t_st.inject.script(\"//www.googleadservices.com/pagead/conversion_async.js\", { callback: function() {\n\t\twindow.google_trackConversion({\n\t\t\tgoogle_conversion_id: 1042468051,\n\t\t\tgoogle_custom_params: props,\n\t\t\tgoogle_remarketing_only: true\n\t\t});\n\t}});\n\t\n\t\n\t\n})();","exec":"async"},{"markerCondition":"[]","loadDefault":false,"groupReverse":false,"r42.conditions":{"condition":{"nodes":[{"nodes":[{"selectionName":"1085_667","nodeType":"CONCRETE"}],"nodeType":"AND"}],"nodeType":"AND"},"cacheSeconds":0},"selector":"head","id":950,"version":4,"content":"(function() {\n\t//send to adwords\n\t_st.inject.script(\"//www.googleadservices.com/pagead/conversion_async.js\", { callback: function() {\n\t\twindow.google_trackConversion({\n\t\t\tgoogle_conversion_id: 1069371383,\n\t\t\tgoogle_conversion_label:\"bXo2CPD-l3AQ95_1_QM\",\n\t\t\t//google_custom_params: data,\n\t\t\tgoogle_remarketing_only: true\n\t\t});\n\t}});\n})();\n        ","exec":"async","group":4},{"markerCondition":"[]","loadDefault":false,"groupReverse":false,"selector":"head","id":822,"version":4,"content":"_st.tracking.syncPartner(7);","group":4},{"markerCondition":"[]","selector":"head","id":845,"version":6,"content":"(function() {\n\t//adwords\n\tvar cmpid = queryvar(r42data.layer.page.fullurl, 'cmpid');\n\tif(typeof(cmpid) !== 'undefined'){\n\t\tvar code = cmpid.split('0001_')[1];\n\t\tvar conversion_label;\n\n\t\tvar vlookup ={\n\t\t\tdevice:'B9fhCLqon24Q95_1_QM',\n\t\t\tsmartl:'n64kCN-mn24Q95_1_QM',\n\t\t\tstartm:'L_4QCLqln24Q95_1_QM'\n\t\t};\n\n\t\tif(typeof(code) !== 'undefined' && vlookup[code]){\n\t\t\tconversion_label = vlookup[code];\n\n\n\t\t\t_st.inject.script(\"//www.googleadservices.com/pagead/conversion_async.js\", { callback: function() {\n\t\t\t\twindow.google_trackConversion({\n\t\t\t\t\tgoogle_conversion_id: 1069371383,\n\t\t\t\t\tgoogle_conversion_label: conversion_label,\n\t\t\t\t\tgoogle_custom_params: window.google_tag_params,\n\t\t\t\t\tgoogle_remarketing_only: true\n\t\t\t\t});\n\t\t\t}});\n\n\n\t\t\t//appnexux (all the same);\n\t\t\t_st.inject.pixel(\"https://secure.adnxs.com/seg?add=7899747&t=2\");\n\n\t\t\t//facebook\n\t\t\t(function (f, b, e, v, n, t, s) {\n\t\t\t\tif (f.fbq) { \n\t\t\t\t\tinitRequired = false; \n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tn = f.fbq = function() {\n\t\t\t\t\tif(n.callMethod) { \n\t\t\t\t\t\tn.callMethod.apply(n, arguments);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tn.queue.push(arguments);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (!f._fbq) f._fbq = n;\n\t\t\t\tn.push = n;\n\t\t\t\tn.loaded = !0;\n\t\t\t\tn.version = '2.0';\n\t\t\t\tn.queue = [];\n\t\t\t\tt = b.createElement(e);\n\t\t\t\tt.async = !0;\n\t\t\t\tt.src = v;\n\t\t\t\ts = b.getElementsByTagName(e)[0];\n\t\t\t\ts.parentNode.insertBefore(t, s);\n\t\t\t})\n\t\t\t(window,document,'script','//connect.facebook.net/en_US/fbevents.js');\n\n\t\t\tfbq('init', '1204176873036605'); \t//initialize vf pixel for VF\n\n\t\t\tfbq('track', 'ViewContent', {\n\t\t\t\t'campaign': 'Ziggo_WellHelo_Email',\n\t\t\t\t'offer': code\n\t\t\t});\n\t\t}\n\t}\n})();\n        ","exec":"async"},{"markerCondition":"[]","selector":"head","id":823,"version":2,"content":"_st.tracking.syncPartner(7);"}],"experiments":[{"id":128,"groups":[{"id":129,"weight":1},{"id":130,"weight":4}]},{"id":161,"groups":[{"id":162,"weight":1},{"id":163,"weight":1}]},{"id":131,"groups":[{"id":132,"weight":1},{"id":133,"weight":9}]},{"id":164,"groups":[{"id":165,"weight":1},{"id":166,"weight":1}]},{"id":100,"groups":[{"id":101,"weight":1},{"id":102,"weight":99}]},{"id":134,"groups":[{"id":135,"weight":1},{"id":136,"weight":9}]},{"id":137,"groups":[{"id":138,"weight":1},{"id":139,"weight":1}]},{"id":170,"groups":[{"id":171,"weight":1},{"id":172,"weight":1},{"id":173,"weight":1}]},{"id":140,"groups":[{"id":141,"weight":1},{"id":142,"weight":1}]},{"id":174,"groups":[{"id":175,"weight":1},{"id":176,"weight":1}]},{"id":143,"groups":[{"id":144,"weight":1},{"id":145,"weight":1}]},{"id":177,"groups":[{"id":178,"weight":1},{"id":179,"weight":1}]},{"id":146,"groups":[{"id":147,"weight":1},{"id":148,"weight":1}]},{"id":180,"groups":[{"id":181,"weight":1},{"id":182,"weight":1}]},{"id":116,"groups":[{"id":117,"weight":1},{"id":118,"weight":9}]},{"id":149,"groups":[{"id":150,"weight":1},{"id":151,"weight":1}]},{"id":119,"groups":[{"id":120,"weight":1},{"id":121,"weight":1}]},{"id":183,"groups":[{"id":184,"weight":1},{"id":185,"weight":1}]},{"id":152,"groups":[{"id":153,"weight":5},{"id":154,"weight":5},{"id":155,"weight":45},{"id":156,"weight":45}]},{"id":186,"groups":[{"id":187,"weight":1},{"id":188,"weight":1}]},{"id":157,"groups":[{"id":158,"weight":1},{"id":159,"weight":1},{"id":160,"weight":1}]},{"id":125,"groups":[{"id":126,"weight":1},{"id":127,"weight":4}]},{"id":189,"groups":[{"id":190,"weight":1},{"id":191,"weight":1}]}],"dataCollectionRate":500});